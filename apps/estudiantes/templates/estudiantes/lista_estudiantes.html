{% extends "layout/base_dashboard.html" %}
{% block title %}Estudiantes{% endblock %}

{% block content %}
<h2>Estudiantes</h2>

<form method="get" class="mb-3">
  <input type="text" name="q" value="{{ request.GET.q }}" placeholder="Buscar por nombre, CI o curso">
  <button>Buscar</button>
  <a href="{% url 'estudiantes:crear' %}">+ Nuevo</a>
</form>

<table class="tabla">
  <thead>
    <tr>
      <th>#</th><th>Apellidos</th><th>Nombres</th><th>CI</th><th>Curso</th><th>Padre/Tutor</th><th>Kardex</th><th></th>
    </tr>
  </thead>
  <tbody>
    {% for e in object_list %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ e.apellidos }}</td>
      <td>{{ e.nombres }}</td>
      <td>{{ e.ci }}</td>
      <td>{{ e.curso }}</td>
      <td>{{ e.padre }}</td>
      <td>{% if e.kardex_id %}Asignado{% else %}-{% endif %}</td>
      <td>
        <a href="{% url 'estudiantes:editar' e.pk %}">Editar</a> |
        <a href="{% url 'estudiantes:eliminar' e.pk %}">Eliminar</a>
        <a href="{% url 'estudiantes:kardex_listar' e.pk %}">Ver k√°rdex</a> |
        <a href="{% url 'estudiantes:kardex_nuevo' e.pk %}">+ Registro</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="8">Sin registros.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
