{% extends "layout/base_dashboard.html" %}
{% load static %}

{% block title %}Exclusiones{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'estudiantes/css/exclusiones_manage.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-header">
  <h2 class="hdr-sub">
    Exclusiones — {{ calendario.fecha_inicio }} → {{ calendario.fecha_fin }}
  </h2>
</div>

<!-- =========================
     SUBTÍTULO: Agregar día sin lista
     ========================= -->
<div class="sub-header">
  <h4>Agregar día sin lista</h4>
  <p>Selecciona la fecha que no se llamará lista</p>
</div>

<div class="asistencia-container">
  <!-- Formulario (derecha) -->
  <div class="columna-form">
    <div class="form-calendario card">
      <div class="form-header">
        <h4>Agregar Exclusión</h4>
        <p>Selecciona una fecha para excluirla del calendario.</p>
      </div>
      <form method="post">
        {% csrf_token %}
        <div class="mb-3">
          <input type="date" name="fecha" class="form-control" />
        </div>
        <button class="btn-guardar" type="submit">Guardar</button>
      </form>
    </div>
  </div>
  <!-- Tabla (izquierda) -->
  <div class="columna-tabla">
    <div class="table-wrapper">
      <table class="tabla-calendarios">
        <thead>
          <tr><th>Fecha</th><th>Acción</th></tr>
        </thead>
        <tbody>
          {% for ex in exclusiones %}
          <tr>
            <td>{{ ex.fecha }}</td>
            <td>
              <form method="post" action="{% url 'estudiantes:asistencia_exclusion_eliminar' calendario.id ex.id %}">
                {% csrf_token %}
                <button type="submit" class="btn-eliminar">Eliminar</button>
              </form>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="2" class="text-center">No hay exclusiones.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
